$tileSize:      128px
$tileSizeZoom:  154px

.scroll_list.tiles > .scrollable
  position: relative
  
  // The entire list
  > ul
    overflow: hidden
    @include  transition(padding-bottom .4s ease)
    
    // Each tile
    > li
      display:        inline-block
      // float: left
      vertical-align: top
      width:          $tileSize
      height:         $tileSize
      margin:         25px 21px 43px 20px
      padding-top:    $tileSize
      
      // Background of the tiles
      background-size:      cover
      background-repeat:    no-repeat
      background-position:  bottom left
      @include              box-shadow(0 2px 7px 0 rgba(0,0,0,.2), 0 0 0 1px rgba(0,0,0,.4) inset, 0 0 0 2px rgba(255,255,255,.4) inset)
      
      // The texts of the tiles
      span
        display:  block
        @include  ellipsis
        // First line
        &:first-child
          padding-bottom: 3px
          font-weight:    bold
          margin-top:     7px
        // Line 2
        &:nth-child(2)
          padding-bottom: 3px
          @include        transition-property(margin-top, opacity)
          @include        transition(.2s ease)
      
      // Zoom state
      -webkit-backface-visibility: hidden
      &.zoom
        -webkit-transform-origin: 64px 64px
        -webkit-transform: scale(1.2)
        font-size:  (1/1.2)+em
        // width:        $tileSizeZoom
        // height:       $tileSizeZoom
        // margin:       16px 8px 26px 7px
        // padding-top:  $tileSizeZoom
        span:nth-child(2)
          margin-top: -17px
          opacity:    0
      
      // When the screen gets narrower, adjust the margins
      @media screen and (max-width: 900px)
        margin-right: 2px
        margin-left:  18px
        // &.zoom
        //   margin-right: -11px
        //   margin-left:  5px
      
      // Nice transition for zooming
      @include  transition-duration(.4s, .2s, .2s, .2s, .2s, .2s, .2s, .1s)
      @include  transition-timing-function(ease)
      @include  transition-property(-webkit-transform, width, height, margin, margin-right, margin-top, padding-top, font-size)
      
      // Already transform it, so modifying this value happens without hick-up
      -webkit-transform: translate3d(0,0,0)
    
    // Animation disable
    &.noanim
      @include transition(none)
    &.noaim > li, > li.noanim
      @include transition(none)
      span:nth-child(2)
        @include transition(none)
  
  
  // Details view
  div.details
    position:           absolute
    top:                0
    left:               0
    right:              0
    overflow:           hidden
    background-color:   #E4E9F0
    -webkit-transform:  translate3d(0,0,0)
    @include            transition(.4s ease)
    @include            transition-property(-webkit-transform, background-color)
    
    // > .arrow_line
    //   position:           absolute
    //   z-index:            1
    //   @include            transition(-webkit-transform .4s ease)
    //   width:              2000px
    //   height:             20px
    //   @include            retina-image("../images/TilesDetailsArrow")
    //   background-repeat:  no-repeat
    
    // Top arrow and shade
    svg
      position:       absolute
      top:            0
      z-index:        1
      @include        transition(-webkit-transform .4s ease)
      path.shadow
        filter: url(#arrow_line_dropshadow)
      path.fill
        fill:   $browserBackgroundColor
      path.stroke
        stroke:       rgba(0,0,0,.23)
        fill:         none
        stroke-width: 1px
    
    // Cover for showing / hiding the details
    > .cover
      position:           absolute
      z-index:            3
      background:         $browserBackgroundColor
      top:                0
      right:              0
      bottom:             0
      left:               0
      @include            transition(-webkit-transform .4s ease)
      border-top:         1px solid rgba(0,0,0,.27)
      @include            box-shadow(0 1px 3px 0 rgba(0,0,0,.46))
      -webkit-transform:  translate3d(0,13px,0)
      
      // Arrow which slides open
      > .arrow
        position:           absolute
        z-index:            4
        width:              20px
        height:             20px
        top:                -11px
        margin-left:        -10px
        background:         $browserBackgroundColor
        border:             solid #b0b0b0
        border-width:       1px 0 0 2px
        -webkit-transform:  rotateZ(45deg)
        @include            transition(-webkit-transform .4s ease)
        
      // Hide the arrow while the details view slides open
      &.open > .arrow
        -webkit-transform:  scale(.01) rotateZ(45deg)
    
    // If a dummy, the details view should be hidden and transitions disabled
    &.dummy
      visibility: hidden
      &, > svg
        @include    transition(none)
    
    // The contents of the details view
    > .content
      @include      transition(opacity .4s ease)
      padding-top:  1.1em
      // Outgoing and incoming transitions
      &.outgoing
        position: absolute
        left:     0
        right:    0
        opacity:  0
      &.incoming
        opacity:  0
      .sec
        color: #959FAD