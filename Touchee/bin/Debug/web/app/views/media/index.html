<%
var loadingClass = function(container) {
  return container.get('loaded') ? '' : 'loading';
};
%>

<%
model.each(function(m){
  
  var masters = m.containers.masters();

  switch (masters.length) {
    case 0:
      return;
    case 1:
      var c = masters.first();
      if (c.isNew()) return;
      %><a href="#<%=_.result(c,'url')%>" class="<%=c.get('contentType')%> <%=loadingClass(c)%>"><span><%=c.get('name')%></span></a><%
      break;
    default:
      %><a href="#<%=_.result(m,'url')%>" class="more <%=m.get('type')%>"><span><%=m.get('name')%></span></a><%
      break;
  }

});
%>

<%
Touchee.CustomContainers.each(function(c){
  %><a href="#<%=_.result(c,'url')%>" class="<%=c.get('contentType')%>"><span><%=c.get('name')%></span></a><%
})
%>